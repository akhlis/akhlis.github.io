{"data":{"doc":{"path":"/docs/deploy-to-gitlab","title":"Deploy to GitLab pages","content":"<h1 id=\"deploy-to-gitlab-pages\"><a href=\"#deploy-to-gitlab-pages\" aria-hidden=\"true\">#</a>Deploy to GitLab pages</h1>\n<p>GitLab pages allows you to deploy static websites using their CI tools.</p>\n<p>First, you need to make a few preparations:</p>\n<ol>\n<li>Set correct base in <code class=\"language-text\">gridsome.config.js</code>:</li>\n</ol>\n<p>If you are deploying to <code class=\"language-text\">https://&lt;USERNAME or GROUP&gt;.gitlab.io/</code>, you can omit <code class=\"language-text\">pathPrefix</code> as it defaults to <code class=\"language-text\">&quot;/&quot;</code>.</p>\n<p>If you are deploying to <code class=\"language-text\">https://&lt;USERNAME or GROUP&gt;.gitlab.io/&lt;REPO&gt;/</code>, (i.e. your repository is at <code class=\"language-text\">https://gitlab.com/&lt;USERNAME&gt;/&lt;REPO&gt;</code>), set <code class=\"language-text\">pathPrefix</code> to <code class=\"language-text\">&quot;/&lt;REPO&gt;/&quot;</code></p>\n<ol start=\"2\">\n<li>Set <code class=\"language-text\">outDir</code> in <code class=\"language-text\">gridsome.config.js</code> to 'public'.</li>\n<li>Create a <code class=\"language-text\">.gitlab-ci.yml</code> file in the root of your project with the content below. This will build and deploy your site whenever you make changes to your content.</li>\n</ol>\n<pre class=\"language-yaml\"><span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">:</span>10.15.0\n\n<span class=\"token key atrule\">pages</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">cache</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> node_modules/\n  <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> npm install\n    <span class=\"token punctuation\">-</span> npm run build\n  <span class=\"token key atrule\">artifacts</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">paths</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> public\n  <span class=\"token key atrule\">only</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> master</pre>\n","headings":[{"value":"Deploy to GitLab pages"}],"subtitles":[]}},"context":{}}