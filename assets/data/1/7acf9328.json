{"data":{"doc":{"path":"/docs/pages-api","title":"Pages API","content":"<h1 id=\"pages-api\"><a href=\"#pages-api\" aria-hidden=\"true\">#</a>Pages API</h1>\n<p>The Pages API lets you create custom pages. This API is called after the GraphQL schema has been generated so you can query nodes and create pages from them or any other data.</p>\n<p>Start by using the <code class=\"language-text\">api.createPages()</code> hook in <code class=\"language-text\">gridsome.server.js</code>:</p>\n<pre class=\"language-js\"><span class=\"token comment\">//gridsome.server.js</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>api<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  api<span class=\"token punctuation\">.</span><span class=\"token function\">createPages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> createPage<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Create pages here</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></pre>\n<h2 id=\"create-a-page\"><a href=\"#create-a-page\" aria-hidden=\"true\">#</a>Create a page</h2>\n<p>Use the <code class=\"language-text\">createPages</code> hook if you want to create pages. Pages created in this hook will be re-created and garbage collected occasionally. Use the <code class=\"language-text\">createManagedPages</code> below to have more control over when pages are updated or deleted manually.</p>\n<h3 id=\"createpageoptions\"><a href=\"#createpageoptions\" aria-hidden=\"true\">#</a>createPage(options)</h3>\n<ul>\n<li>\n<p>options <code class=\"language-text\">object</code></p>\n<ul>\n<li><strong>path</strong> <code class=\"language-text\">string</code> <em>Required.</em></li>\n<li><strong>component</strong> <code class=\"language-text\">string</code> <em>Required.</em></li>\n<li>context <code class=\"language-text\">object</code> <em>Optional context for the page and <code class=\"language-text\">page-query</code>.</em></li>\n<li>queryVariables <code class=\"language-text\">object</code>  <em>Optional context only for <code class=\"language-text\">page-query</code>.</em></li>\n</ul>\n</li>\n</ul>\n<pre class=\"language-js\">module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>api<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  api<span class=\"token punctuation\">.</span><span class=\"token function\">createPages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      path<span class=\"token punctuation\">:</span> <span class=\"token string\">'/my-page'</span><span class=\"token punctuation\">,</span>\n      component<span class=\"token punctuation\">:</span> <span class=\"token string\">'./src/templates/MyPage.vue'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></pre>\n<h2 id=\"create-managed-pages\"><a href=\"#create-managed-pages\" aria-hidden=\"true\">#</a>Create managed pages</h2>\n<p>Pages created in the <code class=\"language-text\">createPages</code> hook will be re-created and garbage collected occasionally. That's why that hook is only able to create pages. You can use a <code class=\"language-text\">createManagedPages</code> hook to create, update and remove pages yourself. </p>\n<pre class=\"language-js\">module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>api<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  api<span class=\"token punctuation\">.</span><span class=\"token function\">createManagedPages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      path<span class=\"token punctuation\">:</span> <span class=\"token string\">'/my-page'</span><span class=\"token punctuation\">,</span>\n      component<span class=\"token punctuation\">:</span> <span class=\"token string\">'./src/templates/MyPage.vue'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></pre>\n<h3 id=\"createpageoptions-1\"><a href=\"#createpageoptions-1\" aria-hidden=\"true\">#</a>createPage(options)</h3>\n<ul>\n<li>\n<p>options <code class=\"language-text\">object</code></p>\n<ul>\n<li><strong>path</strong> <code class=\"language-text\">string</code> <em>Required.</em></li>\n<li><strong>component</strong> <code class=\"language-text\">string</code> <em>Required.</em></li>\n<li>context <code class=\"language-text\">object</code> <em>Optional context for the page and <code class=\"language-text\">page-query</code>.</em></li>\n<li>queryVariables <code class=\"language-text\">object</code>  <em>Optional context only for <code class=\"language-text\">page-query</code>.</em></li>\n</ul>\n</li>\n</ul>\n<p>Create a new page.</p>\n<h3 id=\"removepagepage\"><a href=\"#removepagepage\" aria-hidden=\"true\">#</a>removePage(page)</h3>\n<p>Removed a page created by <code class=\"language-text\">createPage</code>.</p>\n<h3 id=\"removepagebypathpath\"><a href=\"#removepagebypathpath\" aria-hidden=\"true\">#</a>removePageByPath(path)</h3>\n<p>Removes a page matching the provided path.</p>\n<h3 id=\"removepagesbycomponentpath\"><a href=\"#removepagesbycomponentpath\" aria-hidden=\"true\">#</a>removePagesByComponent(path)</h3>\n<p>Removes all pages matching the provided component path.</p>\n<h3 id=\"findandremovepagesquery\"><a href=\"#findandremovepagesquery\" aria-hidden=\"true\">#</a>findAndRemovePages(query)</h3>\n<p>Removes all pages matching the provided query.</p>\n<h3 id=\"findpagesquery\"><a href=\"#findpagesquery\" aria-hidden=\"true\">#</a>findPages(query)</h3>\n<p>Returns all pages matching the provided query.</p>\n<h3 id=\"findpagequery\"><a href=\"#findpagequery\" aria-hidden=\"true\">#</a>findPage(query)</h3>\n<p>Returns first pages matching the provided query.</p>\n<h2 id=\"the-page-context\"><a href=\"#the-page-context\" aria-hidden=\"true\">#</a>The page context</h2>\n<p>Each page can have a context which will be available as variables for <code class=\"language-text\">page-query</code>. The context will also be available in the page component as <code class=\"language-text\">$context</code>. If you only want the context to be available for <code class=\"language-text\">page-query</code>, use the <code class=\"language-text\">queryVariables</code> option instead of <code class=\"language-text\">context</code>.</p>\n<h5 id=\"example-usage\"><a href=\"#example-usage\" aria-hidden=\"true\">#</a>Example usage</h5>\n<pre class=\"language-js\"><span class=\"token comment\">//gridsome.server.js</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>api<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  api<span class=\"token punctuation\">.</span><span class=\"token function\">createPages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      path<span class=\"token punctuation\">:</span> <span class=\"token string\">'/my-page'</span><span class=\"token punctuation\">,</span>\n      component<span class=\"token punctuation\">:</span> <span class=\"token string\">'./src/templates/MyPage.vue'</span><span class=\"token punctuation\">,</span>\n      context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        customValue<span class=\"token punctuation\">:</span> <span class=\"token string\">'...'</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></pre>\n<p>Use the context in the page component or as variables in <code class=\"language-text\">page-query</code>.</p>\n<pre class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Layout</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>{{ $context.customValue }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Layout</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>page-query</span><span class=\"token punctuation\">></span></span><span class=\"token graphql\">\n<span class=\"token keyword\">query</span> MyPage<span class=\"token punctuation\">(</span><span class=\"token variable\">$customValue</span><span class=\"token punctuation\">:</span> String<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>page-query</span><span class=\"token punctuation\">></span></span></pre>\n<h2 id=\"example-usage-1\"><a href=\"#example-usage-1\" aria-hidden=\"true\">#</a>Example usage</h2>\n<h3 id=\"create-pages-from-graphql\"><a href=\"#create-pages-from-graphql\" aria-hidden=\"true\">#</a>Create pages from GraphQL</h3>\n<pre class=\"language-js\"><span class=\"token comment\">//gridsome.server.js</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>api<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  api<span class=\"token punctuation\">.</span><span class=\"token function\">createPages</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> createPage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`{\n      allProduct {\n        edges {\n          id\n          path\n        }\n      }\n    `</span></span><span class=\"token punctuation\">)</span>\n\n    data<span class=\"token punctuation\">.</span>allProduct<span class=\"token punctuation\">.</span>edges<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>node<span class=\"token punctuation\">.</span>path<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/reviews`</span></span><span class=\"token punctuation\">,</span>\n        component<span class=\"token punctuation\">:</span> <span class=\"token string\">'./src/templates/ProductReviews.vue'</span><span class=\"token punctuation\">,</span>\n        context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          id<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>id\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></pre>\n<h3 id=\"create-pages-from-external-apis\"><a href=\"#create-pages-from-external-apis\" aria-hidden=\"true\">#</a>Create pages from external APIs</h3>\n<p>We use <code class=\"language-text\">createManagedPages</code> in this example because we doesn't need the pages to be re-created on changes. The template also uses the context for rendering data instead of GraphQL results.</p>\n<pre class=\"language-js\"><span class=\"token comment\">//gridsome.server.js</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>api<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  api<span class=\"token punctuation\">.</span><span class=\"token function\">createManagedPages</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://api.example.com/posts'</span><span class=\"token punctuation\">)</span>\n\n    data<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>item <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        path<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">,</span>\n        component<span class=\"token punctuation\">:</span> <span class=\"token string\">'./src/templates/Post.vue'</span><span class=\"token punctuation\">,</span>\n        context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          title<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span>\n          content<span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">.</span>content\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></pre>\n<pre class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Layout</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>{{ $context.title }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">v-html</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>$context.content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Layout</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></pre>\n","headings":[{"value":"Pages API"}],"subtitles":[{"value":"Create a page","anchor":"#create-a-page"},{"value":"Create managed pages","anchor":"#create-managed-pages"},{"value":"The page context","anchor":"#the-page-context"},{"value":"Example usage","anchor":"#example-usage-1"}]}},"context":{}}