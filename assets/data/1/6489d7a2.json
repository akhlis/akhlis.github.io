{"data":{"html":{"path":"/html/client-api","title":"Client API","content":"<h1 id=\"client-api\"><a href=\"#client-api\" aria-hidden=\"true\">#</a>Client API</h1>\n<p>Create a <code class=\"language-text\">gridsome.client.js</code> at root in your project or plugin that exports a function. The function will receive the Vue instance, plugin options and a context. The context has references to options for the Vue app, the VueRouter instance and VueMeta options. The file is loaded on the server and in the browser as default.</p>\n<pre class=\"language-js\"><span class=\"token comment\">/**\n * @param Vue                 Vue instance\n * @param options             Plugin options\n * @param context.appOptions  Options for the Vue instance\n * @param context.router      The router instance\n * @param context.head        VueMeta info objet\n * @param context.isClient\n * @param context.isServer\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></pre>\n<h2 id=\"using-in-srcmainjs\"><a href=\"#using-in-srcmainjs\" aria-hidden=\"true\">#</a>Using in <code class=\"language-text\">src/main.js</code></h2>\n<p>Export a default function in <code class=\"language-text\">src/main.js</code> to use the Client API. The only difference here is that it will only have access to the Vue instance and the context. The function will be called after all plugins.</p>\n<h4 id=\"example-usage\"><a href=\"#example-usage\" aria-hidden=\"true\">#</a>Example usage</h4>\n<pre class=\"language-js\"><span class=\"token keyword\">import</span> Bootstrap <span class=\"token keyword\">from</span> <span class=\"token string\">'bootstrap-vue'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'bootstrap/dist/css/bootstrap.css'</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'bootstrap-vue/dist/bootstrap-vue.css'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Vue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>Bootstrap<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></pre>\n<h2 id=\"contextappoptions\"><a href=\"#contextappoptions\" aria-hidden=\"true\">#</a>context.appOptions</h2>\n<p><strong>appOption</strong> is passed to the main <strong>Vue Instance</strong> like <code class=\"language-text\">new Vue(appOptions)</code>.\nHere is an example where we add <strong>Vuex</strong> store to the Vue instance.</p>\n<pre class=\"language-js\"><span class=\"token keyword\">import</span> Vuex <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> appOptions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Vue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>Vuex<span class=\"token punctuation\">)</span>\n  \n  appOptions<span class=\"token punctuation\">.</span>store <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Vuex<span class=\"token punctuation\">.</span>Store</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    state<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      count<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    mutations<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">increment</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        state<span class=\"token punctuation\">.</span>count<span class=\"token operator\">++</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></pre>\n<h2 id=\"contextrouter\"><a href=\"#contextrouter\" aria-hidden=\"true\">#</a>context.router</h2>\n<p><strong>context.router</strong> lets you access the <a href=\"https://router.vuejs.org/api/#router-instance-methods\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Vue Router instance</a>.\nThis example lets you do stuff before next page load.</p>\n<pre class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> router <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  router<span class=\"token punctuation\">.</span><span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">,</span> <span class=\"token keyword\">from</span><span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Do stuff before next page load</span>\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></pre>\n","headings":[{"value":"Client API"}],"subtitles":[{"value":"Using in src/main.js","anchor":"#using-in-srcmainjs"},{"value":"context.appOptions","anchor":"#contextappoptions"},{"value":"context.router","anchor":"#contextrouter"}]}},"context":{}}