{"data":{"html":{"path":"/html/javascript","title":"Taxonomy pages","content":"<h1 id=\"taxonomy-pages\"><a href=\"#taxonomy-pages\" aria-hidden=\"true\">#</a>Taxonomy pages</h1>\n<p>Fields in the GraphQL schema can have references to other nodes. That's a great way to organize pages and have links between them. Every node has a <code class=\"language-text\">belongsTo</code> field which is able to list all other nodes referencing it. The <code class=\"language-text\">belongsTo</code> field works like the <a href=\"/docs/querying-data#content-type-collections\">content type collections</a> with <code class=\"language-text\">totalCount</code>, <code class=\"language-text\">pageInfo</code> and <code class=\"language-text\">edges</code>, but the <code class=\"language-text\">edges</code> field is always a <a href=\"https://graphql.org/learn/schema/#union-types\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">union field</a> which can be any node type.</p>\n<p>Read more about <a href=\"/docs/data-store-api#referencing-other-nodes\">referencing other nodes</a> if you haven't yet.</p>\n<h2 id=\"creating-a-taxonomy-page\"><a href=\"#creating-a-taxonomy-page\" aria-hidden=\"true\">#</a>Creating a taxonomy page</h2>\n<p>In this example we are going to create two content types, a <code class=\"language-text\">Post</code> and a <code class=\"language-text\">Tag</code> types. We do that in the <code class=\"language-text\">loadSource</code> hook in our <code class=\"language-text\">gridsome.server.js</code> file. The <code class=\"language-text\">Post</code> nodes will have a <code class=\"language-text\">tags</code> field which will be an array of <code class=\"language-text\">Tag</code> ids.</p>\n<pre class=\"language-js\">api<span class=\"token punctuation\">.</span><span class=\"token function\">loadSource</span><span class=\"token punctuation\">(</span>store <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">addContentType</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Post'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> tags <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">addContentType</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Tag'</span><span class=\"token punctuation\">)</span>\n\n  posts<span class=\"token punctuation\">.</span><span class=\"token function\">addReference</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tags'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Tag'</span><span class=\"token punctuation\">)</span>\n\n  tags<span class=\"token punctuation\">.</span><span class=\"token function\">addNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token string\">'The author'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  posts<span class=\"token punctuation\">.</span><span class=\"token function\">addNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token string\">'A post'</span><span class=\"token punctuation\">,</span>\n    fields<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      tags<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></pre>\n<p>Now, we create a <code class=\"language-text\">Tag.vue</code> file in <code class=\"language-text\">src/templates</code> to have a template for our tag pages. Every tag page will have a list with posts which have a reference to it.</p>\n<pre class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Layout</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>{{ $page.tag.title }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">v-for</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>edge in $page.tag.belongsTo.edges<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">:key</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>edge.node.id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>g-link</span> <span class=\"token attr-name\">:to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>edge.node.path<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          {{ edge.node.title }}\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>g-link</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Layout</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>page-query</span><span class=\"token punctuation\">></span></span><span class=\"token graphql\">\n<span class=\"token keyword\">query</span> Tag <span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  tag <span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    title\n    belongsTo <span class=\"token punctuation\">{</span>\n      edges <span class=\"token punctuation\">{</span>\n        node <span class=\"token punctuation\">{</span>\n          <span class=\"token operator\">...</span><span class=\"token keyword\">on</span> Post <span class=\"token punctuation\">{</span>\n            id\n            title\n            path\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>page-query</span><span class=\"token punctuation\">></span></span></pre>\n<p>That's it! The tag page above will show a list of posts with links to them.</p>\n<h2 id=\"paginated-taxonomy-pages\"><a href=\"#paginated-taxonomy-pages\" aria-hidden=\"true\">#</a>Paginated taxonomy pages</h2>\n<p>Place the <code class=\"language-text\">@paginate</code> directive after the <code class=\"language-text\">belongsTo</code> field to activate pagination. The query will have a <code class=\"language-text\">$page</code> variable available to pass into the <code class=\"language-text\">belongsTo</code> <code class=\"language-text\">page</code> argument.</p>\n<pre class=\"language-graphql\"><span class=\"token keyword\">query</span> Tag <span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">:</span> String<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$page</span><span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  tag <span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    title\n    belongsTo <span class=\"token punctuation\">(</span><span class=\"token attr-name\">page</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$page</span><span class=\"token punctuation\">)</span> <span class=\"token directive function\">@paginate</span> <span class=\"token punctuation\">{</span>\n      totalCount\n      pageInfo <span class=\"token punctuation\">{</span>\n        totalPages\n        currentPage\n      <span class=\"token punctuation\">}</span>\n      edges <span class=\"token punctuation\">{</span>\n        node <span class=\"token punctuation\">{</span>\n          <span class=\"token operator\">...</span><span class=\"token keyword\">on</span> Post <span class=\"token punctuation\">{</span>\n            id\n            title\n            path\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></pre>\n<h2 id=\"arguments-for-belongsto\"><a href=\"#arguments-for-belongsto\" aria-hidden=\"true\">#</a>Arguments for <code class=\"language-text\">belongsTo</code></h2>\n<table>\n<thead>\n<tr>\n<th>Argument</th>\n<th>Default</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>sortBy</strong></td>\n<td><code class=\"language-text\">&quot;date&quot;</code></td>\n<td>Sort by a node field.</td>\n</tr>\n<tr>\n<td><strong>order</strong></td>\n<td><code class=\"language-text\">DESC</code></td>\n<td>Sort order (<code class=\"language-text\">DESC</code> or <code class=\"language-text\">ASC</code>).</td>\n</tr>\n<tr>\n<td><strong>perPage</strong></td>\n<td><code class=\"language-text\">25</code></td>\n<td>How many nodes to get.</td>\n</tr>\n<tr>\n<td><strong>skip</strong></td>\n<td><code class=\"language-text\">0</code></td>\n<td>How many nodes to skip.</td>\n</tr>\n<tr>\n<td><strong>page</strong></td>\n<td><code class=\"language-text\">1</code></td>\n<td>Which page to get.</td>\n</tr>\n<tr>\n<td><strong>filter</strong></td>\n<td><code class=\"language-text\">{}</code></td>\n<td>Filter nodes by <code class=\"language-text\">id</code>, <code class=\"language-text\">path</code> or <code class=\"language-text\">typeName</code>.</td>\n</tr>\n</tbody>\n</table>\n","headings":[{"value":"Taxonomy pages"}],"subtitles":[{"value":"Creating a taxonomy page","anchor":"#creating-a-taxonomy-page"},{"value":"Paginated taxonomy pages","anchor":"#paginated-taxonomy-pages"},{"value":"Arguments for belongsTo","anchor":"#arguments-for-belongsto"}]}},"context":{}}